(this["webpackJsonphome-works-2-events-state"]=this["webpackJsonphome-works-2-events-state"]||[]).push([[0],{21:function(e,t,c){},22:function(e,t,c){},29:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var n=c(0),i=c.n(n),r=c(11),a=c.n(r),s=(c(21),c(22),c(8)),o=c(2),l=c(4),d=c(7),u=c(16),m={services:[{id:1,name:"\u0417\u0430\u043c\u0435\u043d\u0430 \u0441\u0442\u0435\u043a\u043b\u0430",price:21e3},{id:2,name:"\u0417\u0430\u043c\u0435\u043d\u0430 \u0434\u0438\u0441\u043f\u043b\u0435\u044f",price:25e3}],loading:"idel",error:!1,url:"".concat("https://react-home-works-redux-thunk.herokuapp.com",":").concat("","/api")},j=Object(d.b)({name:"listSlice",initialState:m,reducers:{dellItem:function(e,t){var c=t.payload;e.services=e.services.filter((function(e){return e.id!==c}))},getItem:function(e,t){e.services=Object(u.a)(t.payload)},setError:function(e,t){e.error=t.payload},setLoading:function(e,t){e.loading=t.payload}}}),b=j.actions,f=b.dellItem,h=b.getItem,O=b.setError,v=b.setLoading,p=j.reducer,x=c(12),g=c(5),N=Object(d.b)({name:"formSlice",initialState:{form:{name:"",price:"",content:""}},reducers:{changeFormValue:function(e,t){var c=t.payload,n=c.fild,i=c.value;e.form=Object(g.a)(Object(g.a)({},e.form),{},Object(x.a)({},n,i))},changeFormInItem:function(e,t){e.form=Object(g.a)({},t.payload)}}}),S=N.actions,I=S.changeFormValue,E=(S.formInit,S.changeFormInItem),y=N.reducer,k=Object(d.a)({reducer:{listSlice:p,formSlice:y}}),L=(c(29),c(1)),F=function(e){var t=e.id,c=e.name,n=e.price,i=Object(l.b)();return Object(L.jsxs)("div",{className:"Item",id:t,children:[Object(L.jsx)("span",{className:"Item-item operation",children:c}),Object(L.jsxs)("span",{className:"Item-item price",children:[" ",n]}),Object(L.jsx)(s.b,{to:"/services/".concat(t),className:"Item-item  edit",children:Object(L.jsx)("span",{className:"material-icons edit",children:"edit"})}),Object(L.jsx)("span",{onClick:function(){return i(function(e){return function(t,c){var n=c().listSlice.url;t(O(!1)),t(v("loading")),fetch("".concat(n,"/services/:").concat(e),{method:"DELETE"}).then((function(c){204===c.status&&(t(f(e)),t(v("idel")))})).catch((function(){t(O(!0)),t(v("idel"))}))}}(t))},className:"Item-item del",children:Object(L.jsx)("span",{className:"material-icons del",children:"clear"})})]})};c(31);var w=function(){var e=Object(l.c)((function(e){return e.listSlice})),t=e.services,c=e.loading,i=e.error,r=Object(l.b)();return Object(n.useEffect)((function(){r((function(e,t){var c=t().listSlice.url;e(O(!1)),e(v("loading")),fetch("".concat(c,"/services")).then((function(e){return e.status>300&&console.log("error"+e.status),e.json()})).then((function(t){e(h(t)),e(v("idel"))})).catch((function(){e(v("idel")),e(O(!0))}))}))}),[]),Object(L.jsxs)("div",{className:"ListService",children:[Object(L.jsx)("div",{className:"ListService-row",children:t.map((function(e){return Object(L.jsx)(F,{id:e.id,name:e.name,price:e.price},e.id)}))}),"loading"===c?Object(L.jsx)("div",{className:"loader",children:"LOADING..."}):null,i&&Object(L.jsx)("div",{className:"error",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"})]})};c(32);var C=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.listSlice})),c=t.loading,i=t.error,r=Object(l.c)((function(e){return e.formSlice.form})),a=Object(o.h)(),d=Object(o.g)(),u=function(t){var c=t.target,n=c.name,i="checkbox"===c.type?c.checked:c.value;e(I({fild:n,value:i}))};return Object(n.useEffect)((function(){var t;e((t=a.id,function(e,c){var n=c().listSlice.url;e(O(!1)),e(v("loading")),fetch("".concat(n,"/services/").concat(t)).then((function(e){return e.json()})).then((function(t){e(v("idel")),e(E({name:t.name,price:t.price,content:t.content}))})).catch((function(){e(v("idel")),e(O(!0))}))}))}),[]),Object(L.jsxs)("div",{className:"EditService",children:["loading"===c?Object(L.jsx)("div",{className:"EditService-Loading"}):null,Object(L.jsxs)("form",{className:"Editing-form-row",onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(c,n){var i=n().listSlice.url,r=n().formSlice.form;c(v("loading")),fetch("".concat(i,"/services/"),{method:"POST",body:JSON.stringify(Object(g.a)(Object(g.a)({},r),{},{id:+e}))}).then((function(e){204===e.status&&(c(v("idel")),t("/"))})).catch((function(){c(v("idel")),c(O(!0))}))}}(a.id,d))},children:[Object(L.jsxs)("label",{className:"EditService-lablel",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",Object(L.jsx)("input",{className:"form-item",name:"name",type:"text",value:r.name,onChange:u})]}),Object(L.jsxs)("label",{className:"EditService-lablel",children:["\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",Object(L.jsx)("input",{className:"form-item",name:"price",type:"number",value:r.price,onChange:u})]}),Object(L.jsxs)("label",{className:"EditService-lablel",children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",Object(L.jsx)("input",{className:"form-item",name:"content",type:"text",value:r.content,onChange:u})]}),Object(L.jsxs)("div",{className:"EditService-control",children:[Object(L.jsx)(s.b,{to:"/",className:"form-item control ",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(L.jsx)("input",{className:"form-item control",type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]}),i&&Object(L.jsx)("div",{className:"error",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"})]})};var D=function(){return Object(L.jsx)(l.a,{store:k,children:Object(L.jsx)(s.a,{children:Object(L.jsx)("div",{className:"App",children:Object(L.jsxs)(o.d,{children:[Object(L.jsx)(o.b,{path:"/services/:id",element:Object(L.jsx)(C,{})}),Object(L.jsx)(o.b,{path:"/services",element:Object(L.jsx)(w,{})}),Object(L.jsx)(o.b,{path:"/",element:Object(L.jsx)(o.a,{replace:!0,to:"/services"})})]})})})})},T=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,34)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),n(e),i(e),r(e),a(e)}))};a.a.render(Object(L.jsx)(i.a.StrictMode,{children:Object(L.jsx)(D,{})}),document.getElementById("root")),T()}},[[33,1,2]]]);
//# sourceMappingURL=main.f4abfd34.chunk.js.map