{"version":3,"sources":["store-toolkit/SliceList.js","store-toolkit/SliceForm.js","store-toolkit/store.js","components/Service/Service.js","store-toolkit/SliceActionCreators.js","components/ListService/ListService.js","components/EditService/EditService.js","App.js","reportWebVitals.js","index.js"],"names":["initialState","services","id","name","price","loading","error","url","listSlice","createSlice","reducers","dellItem","state","action","payload","filter","item","getItem","setError","setLoading","actions","formSlice","form","content","changeFormValue","fild","value","changeFormInItem","formInit","configureStore","reducer","Service","dispatch","useDispatch","className","to","onClick","getState","fetch","method","then","response","status","catch","fetchDelItemsThunked","ListService","useSelector","store","useEffect","console","log","json","service","map","EditService","params","useParams","navigate","useNavigate","handleChange","target","type","checked","onSubmit","e","preventDefault","body","JSON","stringify","fetchEditItemThunked","onChange","App","path","element","replace","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f4abfd34.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst adres = \"https://react-home-works-redux-thunk.herokuapp.com\";\n// const adres = \"http://localhost\";\nconst port = \"\";\nconst url = `${adres}:${port}/api`;\n\nconst initialState = {\n  services: [\n    { id: 1, name: \"Замена стекла\", price: 21000 },\n    { id: 2, name: \"Замена дисплея\", price: 25000 },\n  ],\n  loading: \"idel\",\n  error: false,\n  url: url,\n};\n//action={type:\"\",payload:\"\"}\n\nconst listSlice = createSlice({\n  name: \"listSlice\",\n  initialState: initialState,\n  reducers: {\n    dellItem(state, action) {\n      const id = action.payload;\n      state.services = state.services.filter((item) => item.id !== id);\n    },\n    getItem(state, action) {\n      state.services = [...action.payload];\n    },\n    setError(state, action) {\n      state.error = action.payload;\n    },\n    setLoading(state, action) {\n      state.loading = action.payload;\n    },\n  },\n});\n\nexport const { dellItem, getItem, setError, setLoading } = listSlice.actions;\nexport default listSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = { form: { name: \"\", price: \"\", content: \"\" } };\n\n//action={type:\"\",payload:\"\"}\n\nexport const formSlice = createSlice({\n  name: \"formSlice\",\n  initialState: initialState,\n  reducers: {\n    changeFormValue(state, action) {\n      const { fild, value } = action.payload;\n      state.form = { ...state.form, [fild]: value };\n    },\n    changeFormInItem(state, action) {\n      state.form = { ...action.payload };\n    },\n  },\n});\n\nexport const { changeFormValue, formInit, changeFormInItem } =\n  formSlice.actions;\nexport default formSlice.reducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport listSlice from \"./SliceList\";\nimport formSlice from \"./SliceForm\";\n\nexport default configureStore({\n  reducer: {\n    listSlice,\n    formSlice,\n  },\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport \"./desktop.scss\";\nimport { fetchDelItemsThunked } from \"../../store-toolkit/SliceActionCreators\";\nimport { useDispatch } from \"react-redux\";\n\nconst Service = ({ id, name, price }) => {\n  const dispatch = useDispatch();\n  return (\n    <div className=\"Item\" id={id}>\n      <span className=\"Item-item operation\">{name}</span>\n      <span className=\"Item-item price\"> {price}</span>\n      <Link to={`/services/${id}`} className=\"Item-item  edit\">\n        <span className=\"material-icons edit\">edit</span>\n      </Link>\n      <span\n        onClick={() => dispatch(fetchDelItemsThunked(id))}\n        className=\"Item-item del\"\n      >\n        <span className=\"material-icons del\">clear</span>\n      </span>\n    </div>\n  );\n};\n\nService.propTypes = {\n  id: PropTypes.number,\n  name: PropTypes.string,\n  handleDel: PropTypes.func,\n};\n\nexport default Service;\n","import { dellItem, getItem, setError, setLoading } from \"./SliceList\";\nimport { changeFormInItem } from \"./SliceForm\";\n\nexport const fetchItemsThunked = () => (dispatch, getState) => {\n  const url = getState().listSlice.url;\n  dispatch(setError(false));\n  dispatch(setLoading(\"loading\"));\n  fetch(`${url}/services`)\n    .then((response) => {\n      if (response.status > 300) {\n        console.log(\"error\" + response.status);\n      }\n      return response.json();\n    })\n    .then((service) => {\n      dispatch(getItem(service));\n      dispatch(setLoading(\"idel\"));\n    })\n    .catch(() => {\n      dispatch(setLoading(\"idel\"));\n      dispatch(setError(true));\n    });\n};\n\nexport const fetchDelItemsThunked = (id) => (dispatch, getState) => {\n  const url = getState().listSlice.url;\n  dispatch(setError(false));\n  dispatch(setLoading(\"loading\"));\n  fetch(`${url}/services/:${id}`, { method: \"DELETE\" })\n    .then((response) => {\n      if (response.status === 204) {\n        dispatch(dellItem(id));\n        dispatch(setLoading(\"idel\"));\n      }\n    })\n    .catch(() => {\n      dispatch(setError(true));\n      dispatch(setLoading(\"idel\"));\n    });\n};\n\nexport const fetchItemFormThunked = (id) => (dispatch, getState) => {\n  const url = getState().listSlice.url;\n  dispatch(setError(false));\n  dispatch(setLoading(\"loading\"));\n  fetch(`${url}/services/${id}`)\n    .then((response) => {\n      return response.json();\n    })\n    .then((item) => {\n      dispatch(setLoading(\"idel\"));\n      dispatch(\n        changeFormInItem({\n          name: item.name,\n          price: item.price,\n          content: item.content,\n        })\n      );\n    })\n    .catch(() => {\n      dispatch(setLoading(\"idel\"));\n      dispatch(setError(true));\n    });\n};\n\nexport const fetchEditItemThunked = (id, navigate) => (dispatch, getState) => {\n  const url = getState().listSlice.url;\n  const form = getState().formSlice.form;\n  dispatch(setLoading(\"loading\"));\n  fetch(`${url}/services/`, {\n    method: \"POST\",\n    body: JSON.stringify({ ...form, id: +id }),\n  })\n    .then((response) => {\n      if (response.status === 204) {\n        dispatch(setLoading(\"idel\"));\n        navigate(\"/\");\n      }\n    })\n    .catch(() => {\n      dispatch(setLoading(\"idel\"));\n      dispatch(setError(true));\n    });\n};\n","import React, { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Service from \"../Service/Service\";\nimport \"./desktop.scss\";\nimport { fetchItemsThunked } from \"../../store-toolkit/SliceActionCreators\";\n\nfunction ListService() {\n  const { services, loading, error } = useSelector((store) => store.listSlice);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchItemsThunked());\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <div className=\"ListService\">\n      <div className=\"ListService-row\">\n        {services.map((item) => {\n          return (\n            <Service\n              key={item.id}\n              id={item.id}\n              name={item.name}\n              price={item.price}\n            />\n          );\n        })}\n      </div>\n      {loading === \"loading\" ? <div className=\"loader\">LOADING...</div> : null}\n      {error && <div className=\"error\">Произошла ошибка</div>}\n    </div>\n  );\n}\n\nexport default ListService;\n","import React, { useEffect } from \"react\";\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  fetchItemFormThunked,\n  fetchEditItemThunked,\n} from \"../../store-toolkit/SliceActionCreators\";\nimport { changeFormValue } from \"../../store-toolkit/SliceForm\";\nimport \"./desktop.scss\";\n\nfunction EditService() {\n  const dispatch = useDispatch();\n  const { loading, error } = useSelector((store) => store.listSlice);\n  const form = useSelector((store) => store.formSlice.form);\n  const params = useParams();\n  const navigate = useNavigate();\n\n  const handleChange = ({ target }) => {\n    const name = target.name;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    dispatch(changeFormValue({ fild: name, value }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    dispatch(fetchEditItemThunked(params.id, navigate));\n  };\n\n  useEffect(() => {\n    dispatch(fetchItemFormThunked(params.id));\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <div className=\"EditService\">\n      {loading === \"loading\" ? (\n        <div className=\"EditService-Loading\"></div>\n      ) : null}\n      {\n        <form className=\"Editing-form-row\" onSubmit={handleSubmit}>\n          <label className=\"EditService-lablel\">\n            Название\n            <input\n              className=\"form-item\"\n              name=\"name\"\n              type=\"text\"\n              value={form.name}\n              onChange={handleChange}\n            />\n          </label>\n\n          <label className=\"EditService-lablel\">\n            Стоимость\n            <input\n              className=\"form-item\"\n              name=\"price\"\n              type=\"number\"\n              value={form.price}\n              onChange={handleChange}\n            />\n          </label>\n\n          <label className=\"EditService-lablel\">\n            Описание\n            <input\n              className=\"form-item\"\n              name=\"content\"\n              type=\"text\"\n              value={form.content}\n              onChange={handleChange}\n            />\n          </label>\n          <div className=\"EditService-control\">\n            <Link to=\"/\" className=\"form-item control \">\n              Отмена\n            </Link>\n            <input\n              className=\"form-item control\"\n              type=\"submit\"\n              value=\"Сохранить\"\n            />\n          </div>\n        </form>\n      }\n      {error && <div className=\"error\">Произошла ошибка</div>}\n    </div>\n  );\n}\n\nexport default EditService;\n","import React from \"react\";\nimport \"./App.css\";\nimport {\n  HashRouter as Router,\n  Routes,\n  Route,\n  Navigate,\n} from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store-toolkit/store\";\nimport ListService from \"./components/ListService/ListService\";\nimport EditService from \"./components/EditService/EditService\";\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Router>\n        <div className=\"App\">\n          <Routes>\n            <Route path=\"/services/:id\" element={<EditService />} />\n            <Route path=\"/services\" element={<ListService />} />\n            <Route path=\"/\" element={<Navigate replace to=\"/services\" />} />\n          </Routes>\n        </div>\n      </Router>\n    </Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}